<!-- app/views/users/show.html.erb -->
<h1 class="user-username"><%= @user.username %></h1>
<h2 class="user-intro"><%= @user.intro %></h2>
<hr> <!-- Line under intro -->

<h3 class="user-bio"><%= @user.bio %></h3>
<hr> <!-- Line under bio -->

<% if @posts.any? %>
  <% @posts.each do |post| %>
    <div class="post">
      <p><strong>Category:</strong> <%= post.category.name %></p>
      <p><strong>Posted by:</strong> <%= post.user.username %></p>
      <h2><%= link_to post.title, post_path(post) %></h2>
      <p><%= post.created_at.strftime("%B %d, %Y") %></p>
      <p><%= post.content %></p>

      <% if post.photos.attached? %> <!-- Display any photos attached to the post -->
        <div class="post-media">
          <% post.photos.each do |media| %>
            <% if media.content_type.start_with?('image') %>
              <%= cl_image_tag media.key, height: 200, width: 300, crop: :fill, class: 'post-image' %>
            <% elsif media.content_type.start_with?('video') %>
              <video controls height="200" width="300" class="post-video">
                <source src="<%= media.url %>" type="<%= media.content_type %>">
                Your browser does not support the video tag.
              </video>
            <% end %>
          <% end %>
        </div> <!-- Close post-media div here -->
      <% end %>
    </div> <!-- Close post div here -->
    <hr> <!-- Line under each post -->
  <% end %>
<% else %>
  <p>This user has not posted anything yet.</p>
<% end %>
